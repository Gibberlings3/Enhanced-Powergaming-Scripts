LOAD_TRA ~enhanced-powergaming-scripts/languages/%LANGUAGE%/script_dialog.tra~

///////////////////////////////////////////////////////////////////////////
///////////////////////////////////////////////////////////////////////////
// Add SR Mod Components to Accelerated Scripts for BGII: EE and EET     //
///////////////////////////////////////////////////////////////////////////
///////////////////////////////////////////////////////////////////////////
ACTION_IF spell_revisions BEGIN

///////////////////////////////////////////////////////////////////////////
// SR - MO-Core Initial                                                  //
///////////////////////////////////////////////////////////////////////////
	COPY ~enhanced-powergaming-scripts/baf/Accelerated/sr/mocore.baf~  ~enhanced-powergaming-scripts/baf/upload/mocore.baf~
	INCLUDE ~enhanced-powergaming-scripts/lib/core_hotkey.tph~

///////////////////////////////////////////////////////////////////////////
// SR - Remove Dialog Hovertext from Scripts                             //
///////////////////////////////////////////////////////////////////////////
	ACTION_IF scp_dlg BEGIN
		INCLUDE ~enhanced-powergaming-scripts/lib/ini/prebuff_dialog.tph~
	END

///////////////////////////////////////////////////////////////////////////
// SR - Removes Potion Use in Pre-Buffing                                //
///////////////////////////////////////////////////////////////////////////
	ACTION_IF pot_use BEGIN
		INCLUDE ~enhanced-powergaming-scripts/lib/ini/core_pot.tph~
	END

///////////////////////////////////////////////////////////////////////////
// SR - SCS extending the area requiring a mage license                  //
///////////////////////////////////////////////////////////////////////////	
	ACTION_IF scs_mage_license BEGIN
		INCLUDE ~enhanced-powergaming-scripts/lib/BG2EE/license_range.tph~
	END

///////////////////////////////////////////////////////////////////////////
// SR - Song & Silence                                                   //
///////////////////////////////////////////////////////////////////////////
	ACTION_IF song_and_silence BEGIN
		INCLUDE ~enhanced-powergaming-scripts/lib/BG2EE/sr_core_ss_a.tph~
	END

///////////////////////////////////////////////////////////////////////////
// SR - DSotSC Pre-Buffing                                               //
///////////////////////////////////////////////////////////////////////////
	ACTION_IF dsotsc_arcane && !mih_arcane && !iwdification BEGIN
		INCLUDE ~enhanced-powergaming-scripts/lib/BG2EE/sr_prebuff_dsotsc_w_a.tph~
	END

	ACTION_IF dsotsc_divine && !mih_divine && !iwdification BEGIN
		INCLUDE ~enhanced-powergaming-scripts/lib/BG2EE/sr_prebuff_dsotsc_d_a.tph~
	END

///////////////////////////////////////////////////////////////////////////
// SR - IWD Spells Pre-Buffing                                           //
///////////////////////////////////////////////////////////////////////////
	ACTION_IF iwd_scs OR iwdification BEGIN
		INCLUDE ~enhanced-powergaming-scripts/lib/BG2EE/sr_prebuff_iwd_a.tph~
	END

///////////////////////////////////////////////////////////////////////////
// SR - Build out MO-Core and MO-BasicAi                                 //
///////////////////////////////////////////////////////////////////////////	
	COPY ~enhanced-powergaming-scripts/baf/upload/mocore.baf~  ~enhanced-powergaming-scripts/baf/upload/mobasic.baf~
	INCLUDE ~enhanced-powergaming-scripts/lib/sr_basic_base.tph~
	INCLUDE ~enhanced-powergaming-scripts/lib/sr_core_base.tph~

///////////////////////////////////////////////////////////////////////////
// SR - DSotSC                                                           //
///////////////////////////////////////////////////////////////////////////
	ACTION_IF dsotsc_divine && !mih_divine && !iwdification BEGIN
		INCLUDE ~enhanced-powergaming-scripts/lib/BG2EE/sr_core_dsotsc_d.tph~
	END

///////////////////////////////////////////////////////////////////////////
// SR - Tome & Blood                                                     //
///////////////////////////////////////////////////////////////////////////
	// Invisibility Changes
	ACTION_IF tome_and_blood BEGIN
		INCLUDE ~enhanced-powergaming-scripts/lib/BG2EE/sr_core_tb_inv.tph~
	END

///////////////////////////////////////////////////////////////////////////
// SR - Faiths & Powers - Ranger Kits                                    //
///////////////////////////////////////////////////////////////////////////
	ACTION_IF fp_ranger BEGIN
		INCLUDE ~enhanced-powergaming-scripts/lib/BG2EE/sr_ranger_fp_kit_a.tph~
	END

///////////////////////////////////////////////////////////////////////////
// SR - Faiths & Powers - Paladin Kits                                   //
///////////////////////////////////////////////////////////////////////////
	ACTION_IF fp_paladin BEGIN
		INCLUDE ~enhanced-powergaming-scripts/lib/BG2EE/sr_paladin_fp_kit.tph~
	END

///////////////////////////////////////////////////////////////////////////
// SR- Faiths & Powers - Cleric Kits                                     //
///////////////////////////////////////////////////////////////////////////
	ACTION_IF fp_cleric BEGIN
		INCLUDE ~enhanced-powergaming-scripts/lib/BG2EE/core_fp_kit.tph~
	END

///////////////////////////////////////////////////////////////////////////
// SR - IWD Spells                                                       //
///////////////////////////////////////////////////////////////////////////
	ACTION_IF iwd_scs OR iwdification BEGIN
		INCLUDE ~enhanced-powergaming-scripts/lib/BG2EE/sr_core_iwd.tph~
	END

///////////////////////////////////////////////////////////////////////////
// SR - Faiths & Powers - FnP Spheres                                    //
///////////////////////////////////////////////////////////////////////////
	ACTION_IF fp_spheres BEGIN
		INCLUDE ~enhanced-powergaming-scripts/lib/BG2EE/sr_basic_fp_spl_a.tph~
		INCLUDE ~enhanced-powergaming-scripts/lib/BG2EE/sr_core_fp_spl_a.tph~
	END

///////////////////////////////////////////////////////////////////////////
// SR - Update IWD Dispelling Checks                                     //
///////////////////////////////////////////////////////////////////////////
	ACTION_IF iwd_scs OR iwdification BEGIN
		INCLUDE ~enhanced-powergaming-scripts/lib/BG2EE/sr_iwd_dispelling.tph~
	END

///////////////////////////////////////////////////////////////////////////
// SR - SCS - Breach                                                     //
///////////////////////////////////////////////////////////////////////////
	ACTION_IF scs_breach BEGIN
		ACTION_IF iwd_scs OR iwdification BEGIN
			INCLUDE ~enhanced-powergaming-scripts/lib/sr_core_breach_iwd.tph~
		END ELSE BEGIN
			INCLUDE ~enhanced-powergaming-scripts/lib/sr_core_breach.tph~
		END
	END

///////////////////////////////////////////////////////////////////////////
// SCS - Golems                                                          //
///////////////////////////////////////////////////////////////////////////
	ACTION_IF scs_golem BEGIN
		INCLUDE ~enhanced-powergaming-scripts/lib/BG2EE/sr_core_golem.tph~
	END

///////////////////////////////////////////////////////////////////////////
///////////////////////////////////////////////////////////////////////////
// Add Mod Components to Accelerated Scripts without Spell Revisions     //
///////////////////////////////////////////////////////////////////////////
///////////////////////////////////////////////////////////////////////////

END ELSE BEGIN
///////////////////////////////////////////////////////////////////////////
// MO-Core Initial                                                       //
///////////////////////////////////////////////////////////////////////////
	COPY ~enhanced-powergaming-scripts/baf/Accelerated/mocore.baf~  ~enhanced-powergaming-scripts/baf/upload/mocore.baf~
	INCLUDE ~enhanced-powergaming-scripts/lib/core_hotkey.tph~

///////////////////////////////////////////////////////////////////////////
// Remove Dialog Hovertext from Scripts                                  //
///////////////////////////////////////////////////////////////////////////
	ACTION_IF scp_dlg BEGIN
		INCLUDE ~enhanced-powergaming-scripts/lib/ini/prebuff_dialog.tph~
	END

///////////////////////////////////////////////////////////////////////////
// Removes Potion Use in Pre-Buffing                                     //
///////////////////////////////////////////////////////////////////////////
	ACTION_IF pot_use BEGIN
		INCLUDE ~enhanced-powergaming-scripts/lib/ini/core_pot.tph~
	END
	
///////////////////////////////////////////////////////////////////////////
// SCS extending the area requiring a mage license                       //
///////////////////////////////////////////////////////////////////////////
	ACTION_IF scs_mage_license BEGIN
		INCLUDE ~enhanced-powergaming-scripts/lib/BG2EE/license_range.tph~
	END

///////////////////////////////////////////////////////////////////////////
// Song & Silence                                                        //
///////////////////////////////////////////////////////////////////////////
	ACTION_IF song_and_silence BEGIN
		INCLUDE ~enhanced-powergaming-scripts/lib/BG2EE/core_ss_a.tph~
	END

///////////////////////////////////////////////////////////////////////////
// DSotSC Pre-Buffing                                                    //
///////////////////////////////////////////////////////////////////////////
	ACTION_IF dsotsc_arcane && !mih_arcane && !iwdification BEGIN
		INCLUDE ~enhanced-powergaming-scripts/lib/BG2EE/prebuff_dsotsc_w_a.tph~
	END

	ACTION_IF dsotsc_divine && !mih_divine && !iwdification BEGIN
		INCLUDE ~enhanced-powergaming-scripts/lib/BG2EE/prebuff_dsotsc_d_a.tph~
	END

///////////////////////////////////////////////////////////////////////////
// IWD Spells Pre-Buffing                                                //
///////////////////////////////////////////////////////////////////////////
	ACTION_IF iwd_scs OR iwdification BEGIN
		INCLUDE ~enhanced-powergaming-scripts/lib/BG2EE/prebuff_iwd_a.tph~
	END

///////////////////////////////////////////////////////////////////////////
// Build out MO-Core and MO-BasicAi                                      //
///////////////////////////////////////////////////////////////////////////	
	COPY ~enhanced-powergaming-scripts/baf/upload/mocore.baf~  ~enhanced-powergaming-scripts/baf/upload/mobasic.baf~
	INCLUDE ~enhanced-powergaming-scripts/lib/basic_base.tph~
	INCLUDE ~enhanced-powergaming-scripts/lib/core_base.tph~

///////////////////////////////////////////////////////////////////////////
// DSotSC                                                                //
///////////////////////////////////////////////////////////////////////////
	ACTION_IF dsotsc_divine && !mih_divine && !iwdification BEGIN
		INCLUDE ~enhanced-powergaming-scripts/lib/BG2EE/core_dsotsc_d.tph~
	END

///////////////////////////////////////////////////////////////////////////
// Faiths & Powers - Ranger Kits                                          //
///////////////////////////////////////////////////////////////////////////
	ACTION_IF fp_ranger BEGIN
		INCLUDE ~enhanced-powergaming-scripts/lib/BG2EE/ranger_fp_kit_a.tph~
	END

///////////////////////////////////////////////////////////////////////////
// Tome & Blood                                                          //
///////////////////////////////////////////////////////////////////////////
	// Invisibility Changes
	ACTION_IF tome_and_blood BEGIN
		INCLUDE ~enhanced-powergaming-scripts/lib/BG2EE/core_tb_inv.tph~
	END

///////////////////////////////////////////////////////////////////////////
// Faiths & Powers - Paladin Kits                                        //
///////////////////////////////////////////////////////////////////////////
	ACTION_IF fp_paladin BEGIN
		INCLUDE ~enhanced-powergaming-scripts/lib/BG2EE/paladin_fp_kit.tph~
	END

///////////////////////////////////////////////////////////////////////////
// Faiths & Powers - Cleric Kits                                         //
///////////////////////////////////////////////////////////////////////////
	ACTION_IF fp_cleric BEGIN
		INCLUDE ~enhanced-powergaming-scripts/lib/BG2EE/core_fp_kit.tph~
	END

///////////////////////////////////////////////////////////////////////////
// IWD Spells                                                            //
///////////////////////////////////////////////////////////////////////////
	ACTION_IF iwd_scs OR iwdification BEGIN
		INCLUDE ~enhanced-powergaming-scripts/lib/BG2EE/core_iwd.tph~
	END

///////////////////////////////////////////////////////////////////////////
// Faiths & Powers - FnP Spheres                                         //
///////////////////////////////////////////////////////////////////////////
	ACTION_IF fp_spheres BEGIN
		INCLUDE ~enhanced-powergaming-scripts/lib/BG2EE/basic_fp_spl_a.tph~
		INCLUDE ~enhanced-powergaming-scripts/lib/BG2EE/core_fp_spl_a.tph~
	END

///////////////////////////////////////////////////////////////////////////
// Update IWD Dispelling Checks                                          //
///////////////////////////////////////////////////////////////////////////
	ACTION_IF iwd_scs OR iwdification BEGIN
		INCLUDE ~enhanced-powergaming-scripts/lib/BG2EE/iwd_dispelling.tph~
	END

///////////////////////////////////////////////////////////////////////////
// SCS - Breach                                                          //
///////////////////////////////////////////////////////////////////////////
	ACTION_IF scs_breach BEGIN
		ACTION_IF iwd_scs OR iwdification BEGIN
			INCLUDE ~enhanced-powergaming-scripts/lib/core_breach_iwd.tph~
		END ELSE BEGIN
			INCLUDE ~enhanced-powergaming-scripts/lib/core_breach.tph~
		END
	END

///////////////////////////////////////////////////////////////////////////
// SCS - Golems                                                          //
///////////////////////////////////////////////////////////////////////////
	ACTION_IF scs_golem BEGIN
		INCLUDE ~enhanced-powergaming-scripts/lib/BG2EE/core_golem.tph~
	END
END

///////////////////////////////////////////////////////////////////////////
// Update ini Presets                                                    //
///////////////////////////////////////////////////////////////////////////
	// Basic AI will Auto-Attack Enemies
	ACTION_IF bsc_atk BEGIN
		INCLUDE ~enhanced-powergaming-scripts/lib/ini/basic_atk.tph~
	END

	// Removes Dialog Hovertext from Scripts
	ACTION_IF scp_dlg BEGIN
		INCLUDE ~enhanced-powergaming-scripts/lib/ini/core_dialog.tph~
	END

///////////////////////////////////////////////////////////////////////////
// Create Skald Script Modeled After Core                                //
///////////////////////////////////////////////////////////////////////////
	INCLUDE ~enhanced-powergaming-scripts/lib/skald_base.tph~

///////////////////////////////////////////////////////////////////////////
// Removes Targeting Dancing Swords with Magic Missiles                  //
///////////////////////////////////////////////////////////////////////////
	ACTION_IF dnc_swrd BEGIN
		INCLUDE ~enhanced-powergaming-scripts/lib/ini/rmv_dnc_swrd.tph~
	END

///////////////////////////////////////////////////////////////////////////
///////////////////////////////////////////////////////////////////////////
// Import AI Scripts into the Game                                       //
///////////////////////////////////////////////////////////////////////////
///////////////////////////////////////////////////////////////////////////

///////////////////////////////////////////////////////////////////////////
// Copy .BS files to scripts folder                                      //
///////////////////////////////////////////////////////////////////////////
COPY ~enhanced-powergaming-scripts/baf/upload/mobasic.baf~  ~scripts/mobasic.bs~
	 ~enhanced-powergaming-scripts/baf/upload/mocore.baf~   ~scripts/mocore.bs~
	 ~enhanced-powergaming-scripts/baf/upload/moskd.baf~    ~scripts/moskd.bs~
  COMPILE_BAF_TO_BCS


///////////////////////////////////////////////////////////////////////////
// Add descriptions of the scripts to scrpdesc.2da                       //
///////////////////////////////////////////////////////////////////////////
APPEND ~scrpdesc.2DA~
~mobasic	999988		 999987
mocore      999986       999985
moskd		999980		 999979~

///////////////////////////////////////////////////////////////////////////
// Copy the appended scrpdesc.2da to the override folder                 //
///////////////////////////////////////////////////////////////////////////
COPY_EXISTING ~scrpdesc.2da~ ~override~
REPLACE ~999988~ @1090
REPLACE ~999987~ @1091
REPLACE ~999986~ @1100
REPLACE ~999985~ @1101
REPLACE ~999980~ @1070
REPLACE ~999979~ @1071