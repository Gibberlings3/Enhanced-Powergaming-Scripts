LOAD_TRA ~enhanced-powergaming-scripts/languages/%LANGUAGE%/script_dialog.tra~

///////////////////////////////////////////////////////////////////////////
///////////////////////////////////////////////////////////////////////////
// Final Modifications to Base Script                                    //
///////////////////////////////////////////////////////////////////////////
///////////////////////////////////////////////////////////////////////////

///////////////////////////////////////////////////////////////////////////
// Thieving Skills for Bards                                             //
///////////////////////////////////////////////////////////////////////////
	ACTION_IF bard_thief BEGIN
		INCLUDE ~enhanced-powergaming-scripts/lib/bard_thief.tph~
	END

///////////////////////////////////////////////////////////////////////////
// Faiths & Powers - Cleric Kits                                         //
///////////////////////////////////////////////////////////////////////////
	ACTION_IF fp_cleric BEGIN
		INCLUDE ~enhanced-powergaming-scripts/lib/BG2EE/prebuff_fp_cleric_kit.tph~
	END

///////////////////////////////////////////////////////////////////////////
// SR- Faiths & Powers - Paladin Kits                                    //
///////////////////////////////////////////////////////////////////////////
	ACTION_IF fp_paladin BEGIN
		INCLUDE ~enhanced-powergaming-scripts/lib/BG2EE/prebuff_fp_paladin_kit.tph~
	END

///////////////////////////////////////////////////////////////////////////
// MiH - Arcane Spells Major Globe                                       //
///////////////////////////////////////////////////////////////////////////
	ACTION_IF mih_arcane BEGIN
		INCLUDE ~enhanced-powergaming-scripts/lib/BG2EE/core_mih_globe.tph~
	END

///////////////////////////////////////////////////////////////////////////
///////////////////////////////////////////////////////////////////////////
// SR - Split up and Modify Individual Scripts                           //
///////////////////////////////////////////////////////////////////////////
///////////////////////////////////////////////////////////////////////////
ACTION_IF spell_revisions BEGIN

///////////////////////////////////////////////////////////////////////////
// SR - Build out MO-Core and MO-BasicAi                                 //
///////////////////////////////////////////////////////////////////////////	
	COPY ~enhanced-powergaming-scripts/baf/upload/mocore.baf~  ~enhanced-powergaming-scripts/baf/upload/mobasic.baf~
	INCLUDE ~enhanced-powergaming-scripts/lib/sr_basic_base.tph~
	INCLUDE ~enhanced-powergaming-scripts/lib/sr_core_base.tph~

///////////////////////////////////////////////////////////////////////////
// SR - DSotSC                                                           //
///////////////////////////////////////////////////////////////////////////
	ACTION_IF dsotsc_divine && !mih_divine && !iwdification BEGIN
		INCLUDE ~enhanced-powergaming-scripts/lib/BG2EE/core_dsotsc_d.tph~
	END

///////////////////////////////////////////////////////////////////////////
// SR - Tome & Blood                                                     //
///////////////////////////////////////////////////////////////////////////
	// Invisibility Changes
	ACTION_IF tome_and_blood BEGIN
		INCLUDE ~enhanced-powergaming-scripts/lib/BG2EE/sr_core_tb_inv.tph~
	END

///////////////////////////////////////////////////////////////////////////
// SR - Faiths & Powers - Ranger Kits                                    //
///////////////////////////////////////////////////////////////////////////
	ACTION_IF fp_ranger BEGIN
		INCLUDE ~enhanced-powergaming-scripts/lib/BG2EE/sr_ranger_fp_kit.tph~
	END

///////////////////////////////////////////////////////////////////////////
// SR - Faiths & Powers - Paladin Kits                                   //
///////////////////////////////////////////////////////////////////////////
	ACTION_IF fp_paladin BEGIN
		INCLUDE ~enhanced-powergaming-scripts/lib/BG2EE/paladin_fp_kit.tph~
	END

///////////////////////////////////////////////////////////////////////////
// SR - MiH Spell Restorations                                           //
///////////////////////////////////////////////////////////////////////////
	ACTION_IF mih_restorations BEGIN
		INCLUDE ~enhanced-powergaming-scripts/lib/BG2EE/sr_core_mih_sr.tph~
	END

///////////////////////////////////////////////////////////////////////////
// SR - MiH Arcane Spells                                                //
///////////////////////////////////////////////////////////////////////////
	ACTION_IF mih_arcane BEGIN
		INCLUDE ~enhanced-powergaming-scripts/lib/BG2EE/core_mih_arcane.tph~
	END

///////////////////////////////////////////////////////////////////////////
// SR - MiH Divine Spells                                                //
///////////////////////////////////////////////////////////////////////////
	ACTION_IF mih_divine BEGIN
		INCLUDE ~enhanced-powergaming-scripts/lib/BG2EE/sr_core_mih_divine.tph~
	END

///////////////////////////////////////////////////////////////////////////
// SR - IWD Spells                                                       //
///////////////////////////////////////////////////////////////////////////
	ACTION_IF iwd_scs OR iwdification BEGIN
		INCLUDE ~enhanced-powergaming-scripts/lib/BG2EE/sr_core_iwd.tph~
	END

///////////////////////////////////////////////////////////////////////////
// SR - d5 Random Tweaks - Cure Bypass Deflection                        //
///////////////////////////////////////////////////////////////////////////
	ACTION_IF d5_deflected BEGIN
		INCLUDE ~enhanced-powergaming-scripts/lib/BG2EE/sr_d5_cure_dispelling.tph~
	END

///////////////////////////////////////////////////////////////////////////
// SR - Faiths & Powers - FnP Spheres                                    //
///////////////////////////////////////////////////////////////////////////
	ACTION_IF fp_spheres BEGIN
		INCLUDE ~enhanced-powergaming-scripts/lib/BG2EE/sr_core_fp_spl.tph~
	END

///////////////////////////////////////////////////////////////////////////
// SR - Update IWD Dispelling Checks                                     //
///////////////////////////////////////////////////////////////////////////
	ACTION_IF iwd_scs OR iwdification BEGIN
		INCLUDE ~enhanced-powergaming-scripts/lib/BG2EE/sr_iwd_dispelling.tph~
	END

///////////////////////////////////////////////////////////////////////////
// SR - Update Dispelling - SCS, IWD, and MiH                            //
///////////////////////////////////////////////////////////////////////////
	ACTION_IF scs_breach BEGIN
		INCLUDE ~enhanced-powergaming-scripts/lib/scs_breach.tph~
		ACTION_IF iwd_scs OR iwdification BEGIN
			ACTION_IF mih_arcane BEGIN
				INCLUDE ~enhanced-powergaming-scripts/lib/bg2ee/sr_core_breach_globe_iwd.tph~
			END ELSE BEGIN
				INCLUDE ~enhanced-powergaming-scripts/lib/sr_core_breach_iwd.tph~
			END
		END ELSE BEGIN
			ACTION_IF mih_arcane BEGIN
				INCLUDE ~enhanced-powergaming-scripts/lib/bg2ee/sr_core_breach_globe.tph~
			END ELSE BEGIN
				INCLUDE ~enhanced-powergaming-scripts/lib/sr_core_breach.tph~
			END			
		END
	END ELSE BEGIN
		ACTION_IF mih_arcane BEGIN
			INCLUDE ~enhanced-powergaming-scripts/lib/bg2ee/sr_globe.tph~
		END
	END

///////////////////////////////////////////////////////////////////////////
// SCS - Golems                                                          //
///////////////////////////////////////////////////////////////////////////
	ACTION_IF scs_golem BEGIN
		INCLUDE ~enhanced-powergaming-scripts/lib/BG2EE/sr_core_golem.tph~
	END

///////////////////////////////////////////////////////////////////////////
///////////////////////////////////////////////////////////////////////////
// Add Mod Components to Scripts without Spell Revisions                 //
///////////////////////////////////////////////////////////////////////////
///////////////////////////////////////////////////////////////////////////

END ELSE BEGIN
///////////////////////////////////////////////////////////////////////////
// Build out MO-Core and MO-BasicAi                                      //
///////////////////////////////////////////////////////////////////////////		
	COPY ~enhanced-powergaming-scripts/baf/upload/mocore.baf~  ~enhanced-powergaming-scripts/baf/upload/mobasic.baf~
	INCLUDE ~enhanced-powergaming-scripts/lib/basic_base.tph~
	INCLUDE ~enhanced-powergaming-scripts/lib/core_base.tph~

///////////////////////////////////////////////////////////////////////////
// DSotSC                                                                //
///////////////////////////////////////////////////////////////////////////
	ACTION_IF dsotsc_divine && !mih_divine && !iwdification BEGIN
		INCLUDE ~enhanced-powergaming-scripts/lib/BG2EE/core_dsotsc_d.tph~
	END

///////////////////////////////////////////////////////////////////////////
// Faiths & Powers - Ranger Kits                                          //
///////////////////////////////////////////////////////////////////////////
	ACTION_IF fp_ranger BEGIN
		INCLUDE ~enhanced-powergaming-scripts/lib/BG2EE/ranger_fp_kit.tph~
	END

///////////////////////////////////////////////////////////////////////////
// Tome & Blood                                                          //
///////////////////////////////////////////////////////////////////////////
	// Invisibility Changes
	ACTION_IF tome_and_blood BEGIN
		INCLUDE ~enhanced-powergaming-scripts/lib/BG2EE/core_tb_inv.tph~
	END

///////////////////////////////////////////////////////////////////////////
// Faiths & Powers - Paladin Kits                                        //
///////////////////////////////////////////////////////////////////////////
	ACTION_IF fp_paladin BEGIN
		INCLUDE ~enhanced-powergaming-scripts/lib/BG2EE/paladin_fp_kit.tph~
	END

///////////////////////////////////////////////////////////////////////////
// MiH - Spell Restorations                                              //
///////////////////////////////////////////////////////////////////////////
	ACTION_IF mih_restorations BEGIN
		INCLUDE ~enhanced-powergaming-scripts/lib/BG2EE/core_mih_sr.tph~
	END

///////////////////////////////////////////////////////////////////////////
// MiH - Arcane Spells                                                   //
///////////////////////////////////////////////////////////////////////////
	ACTION_IF mih_arcane BEGIN
		INCLUDE ~enhanced-powergaming-scripts/lib/BG2EE/core_mih_arcane.tph~
	END

///////////////////////////////////////////////////////////////////////////
// MiH - Divine Spells                                                   //
///////////////////////////////////////////////////////////////////////////
	ACTION_IF mih_divine BEGIN
		INCLUDE ~enhanced-powergaming-scripts/lib/BG2EE/core_mih_divine.tph~
	END

///////////////////////////////////////////////////////////////////////////
// IWD Spells                                                            //
///////////////////////////////////////////////////////////////////////////
	ACTION_IF iwd_scs OR iwdification BEGIN
		INCLUDE ~enhanced-powergaming-scripts/lib/BG2EE/core_iwd.tph~
	END

///////////////////////////////////////////////////////////////////////////
// d5 Random Tweaks - Cure Bypass Deflection                             //
///////////////////////////////////////////////////////////////////////////
	ACTION_IF d5_deflected BEGIN
		INCLUDE ~enhanced-powergaming-scripts/lib/BG2EE/d5_cure_dispelling.tph~
	END

///////////////////////////////////////////////////////////////////////////
// Faiths & Powers - FnP Spheres                                         //
///////////////////////////////////////////////////////////////////////////
	ACTION_IF fp_spheres BEGIN
		INCLUDE ~enhanced-powergaming-scripts/lib/BG2EE/core_fp_spl.tph~
	END

///////////////////////////////////////////////////////////////////////////
// Update IWD Dispelling Checks                                          //
///////////////////////////////////////////////////////////////////////////
	ACTION_IF iwd_scs OR iwdification BEGIN
		INCLUDE ~enhanced-powergaming-scripts/lib/BG2EE/iwd_dispelling.tph~
	END

///////////////////////////////////////////////////////////////////////////
// Update Dispelling - SCS, IWD, and MiH                                 //
///////////////////////////////////////////////////////////////////////////
	ACTION_IF scs_breach BEGIN
		INCLUDE ~enhanced-powergaming-scripts/lib/scs_breach.tph~
		ACTION_IF iwd_scs OR iwdification BEGIN
			ACTION_IF mih_arcane BEGIN
				INCLUDE ~enhanced-powergaming-scripts/lib/bg2ee/core_breach_globe_iwd.tph~
			END ELSE BEGIN
				INCLUDE ~enhanced-powergaming-scripts/lib/core_breach_iwd.tph~
			END
		END ELSE BEGIN
			ACTION_IF mih_arcane BEGIN
				INCLUDE ~enhanced-powergaming-scripts/lib/bg2ee/core_breach_globe.tph~
			END ELSE BEGIN
				INCLUDE ~enhanced-powergaming-scripts/lib/core_breach.tph~
			END			
		END
	END ELSE BEGIN
		ACTION_IF iwd_scs OR iwdification BEGIN
			ACTION_IF mih_arcane BEGIN
				INCLUDE ~enhanced-powergaming-scripts/lib/bg2ee/globe_iwd.tph~
			END
		END ELSE BEGIN
			ACTION_IF mih_arcane BEGIN
				INCLUDE ~enhanced-powergaming-scripts/lib/bg2ee/globe.tph~
			END
		END
	END

///////////////////////////////////////////////////////////////////////////
// Golems                                                                //
///////////////////////////////////////////////////////////////////////////
	ACTION_IF scs_golem BEGIN
		INCLUDE ~enhanced-powergaming-scripts/lib/BG2EE/core_golem.tph~
	END
END

///////////////////////////////////////////////////////////////////////////
// Update ini Presets                                                    //
///////////////////////////////////////////////////////////////////////////
	// Basic AI will Auto-Attack Enemies
	ACTION_IF bsc_atk BEGIN
		INCLUDE ~enhanced-powergaming-scripts/lib/ini/basic_atk.tph~
	END

	// Removes Dialog Hovertext from Scripts
	ACTION_IF scp_dlg BEGIN
		INCLUDE ~enhanced-powergaming-scripts/lib/ini/core_dialog.tph~
	END

///////////////////////////////////////////////////////////////////////////
// MiH - Arcane Spells Major Globe                                       //
///////////////////////////////////////////////////////////////////////////
	ACTION_IF mih_arcane BEGIN
		INCLUDE ~enhanced-powergaming-scripts/lib/BG2EE/core_mih_globe.tph~
	END
	
///////////////////////////////////////////////////////////////////////////
// Make Skald Script after Core                                          //
///////////////////////////////////////////////////////////////////////////
	INCLUDE ~enhanced-powergaming-scripts/lib/skald_base.tph~

///////////////////////////////////////////////////////////////////////////
// Thieving Skills for Bards                                             //
///////////////////////////////////////////////////////////////////////////
	ACTION_IF bard_thief BEGIN
		INCLUDE ~enhanced-powergaming-scripts/lib/bard_thief.tph~
		INCLUDE ~enhanced-powergaming-scripts/lib/skald_bard_thief.tph~
	END

///////////////////////////////////////////////////////////////////////////
// Removes Targeting Dancing Swords with Magic Missiles                  //
///////////////////////////////////////////////////////////////////////////
	ACTION_IF dnc_swrd BEGIN
		INCLUDE ~enhanced-powergaming-scripts/lib/ini/rmv_dnc_swrd.tph~
	END

///////////////////////////////////////////////////////////////////////////
///////////////////////////////////////////////////////////////////////////
// Import AI Scripts into the Game                                       //
///////////////////////////////////////////////////////////////////////////
///////////////////////////////////////////////////////////////////////////

///////////////////////////////////////////////////////////////////////////
// Copy .BS files to scripts folder                                      //
///////////////////////////////////////////////////////////////////////////
COPY ~enhanced-powergaming-scripts/baf/upload/mobasic.baf~  ~scripts/mobasic.bs~
	 ~enhanced-powergaming-scripts/baf/upload/mocore.baf~   ~scripts/mocore.bs~
	 ~enhanced-powergaming-scripts/baf/upload/moskd.baf~    ~scripts/moskd.bs~
  COMPILE_BAF_TO_BCS
